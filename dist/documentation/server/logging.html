<!DOCTYPE html>
<html>
<head>
  <title>Logging</title>
  <meta name='alias' content='/dwr/server/logging'>
  <meta name="weight" content="5">  
  <link rel="stylesheet" type="text/css" href="../../media/styles.css">
  <link rel='shortcut icon' type='image/x-icon' href='favicon.ico'>
  <script type='text/javascript' src='../../media/dojo.js'> </script>
  <script type='text/javascript' src='../../media/menu.js'> </script>
</head>
<body>
<div id='header'><a href='../../index.html'>Direct Web Remoting</a></div>
<div id=pagelinks>
<div class='navlinks'>[ 
<a href='../../index.html' title='Easy Ajax for Java'>DWR</a> | 
 ]
<form method='GET' action='https://www.google.com/search' id='search-form'>
<span id='search'>
<input class='form-text' type='text' id='search-box' name='as_q' size='20' maxlength='255'>
<input type='hidden' name='as_sitesearch' value='directwebremoting.org'/>
<input class='form-submit' type='submit' value='Google'/>
</span>
</form>
</div>
<div id='breadcrumbs'><a href='../../index.html'>DWR - Easy Ajax for JAVA</a> &#x00BB; <a href='../../documentation/index.html'>Documentation</a> &#x00BB; <a href='../../documentation/server/index.html'>Server Side</a> &#x00BB; <a href='logging.html' class='currentLink'>Logging</a></div></div>
<div id='content'>

<h1>Logging</h1>
<h2>Logging Dependencies and Implementations</h2>
<p>DWR currently depends on <a href="http://commons.apache.org/logging/" target="new">Apache Commons Logging</a>.  Because we use commons-logging you are free to choose your logging implementation (<a href="http://logging.apache.org/log4j/1.2/index.html" target="new">Log4j</a> is a common choice).</p>

<h2>Our Default Logging Policy</h2>
<p>Out of the box, DWR is silent about &quot;application&quot; exceptions/errors (when DWR's debug mode is disabled).   &quot;Application&quot; exceptions are exceptions/errors thrown from your application:</p><pre>
// Suppose the remoteMe method is exposed to DWR, and called<br>// through the browser.  Also assume this method invocation results<br>// in a MyBusinessException being thrown.<br><br>public String remoteMe() throws MyBusinessException {<br>  // Whatever is here throws MyBusinessException<br>}</pre>In this situation MyBusinessException is an &quot;application&quot; exception  and DWR will not log the exception/error regardless of the severity.<br><br>   Contrary to &quot;application&quot; exceptions/errors DWR will always log exceptions thrown/caught by DWR internals (Conversion exceptions, Creator exceptions, etc.) at a level dependent of their severity (DEBUG, INFO, WARN, etc.).  <br><h2>Logging Configuration</h2>DWR's default logging policy can be configured by an init-param  (accessLogLevel) on the DWR servlet (declared in your web.xml).<pre>
...
&lt;servlet&gt;
    &lt;display-name&gt;DWR Servlet&lt;/display-name&gt;
    &lt;servlet-name&gt;dwr-invoker&lt;/servlet-name&gt;    
    &lt;description&gt;Direct Web Remoter Servlet&lt;/description&gt;
    &lt;servlet-class&gt;org.directwebremoting.servlet.DwrServlet&lt;/servlet-class&gt;    
    &lt;init-param&gt;
      &lt;param-name&gt;accessLogLevel&lt;/param-name&gt;
      &lt;param-value&gt;EXCEPTION&lt;/param-value&gt;
    &lt;/init-param&gt;
...</pre>
<p>The accessLogLevel parameter may have the following values (case insensitive).  Similar to other logging frameworks  logging requests are  enabled if the level is higher than or equal to the accessLogLevel specified (e.g. An accessLogLevel of CALL will result in the logging of all levels):<br><ol><li>CALL - Most verbose level.  Will log incoming and outgoing DWR calls.</li><li>EXCEPTION - Logging  of checked Exceptions will be enabled.</li><li>RUNTIMEEXCEPTION - Logging of RuntimeExceptions will be enabled</li><li>ERROR - Logging of Errors will be enabled.</li></ol>All access logging is written to the same logger - org.directwebremoting.log.accessLog.  This allows an application to easily control and separate DWR logging from the rest of the system.<h2>Debug Mode and Logging</h2>When <a href="index.html">debug mode</a> is enabled DWR will set the accessLogLevel to EXCEPTION by default.  This behavior can be modified by specifying a valid accessLogLevel.  <br><br>When debug mode is disabled and no accessLogLevel has been specified or an invalid accessLogLevel has been specified all logging will be disabled.
<h2>Configuring Log4J for DWR</h2>
<p>Using Log4j requires that the Log4j.jar and the Log4j configuration file be in your application's classpath (WEB-INF/lib and WEB-INF/classes). Here is a log4j.xml file that can help get you started (this should be placed in your WEB-INF/classes directory):</p>
<pre>
&lt;?xml version="1.0" encoding="UTF-8" ?>
&lt;!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

&lt;log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/"&gt;
  &lt;appender name="console" class="org.apache.log4j.ConsoleAppender"&gt; 
    &lt;param name="Target" value="System.out"/&gt; 
    &lt;layout class="org.apache.log4j.PatternLayout"&gt; 
      &lt;param name="ConversionPattern" value="%-5p %c{1} - %m%n"/&gt; 
    &lt;/layout&gt; 
  &lt;/appender&gt; 

  &lt;appender name="dwrLogFile" class="org.apache.log4j.FileAppender"&gt;
     &lt;param name="File" value="C:/Program Files/Apache Software Foundation/Tomcat 6.0/webapps/dwr/log/dwrAccess.log"/&gt;
     &lt;param name="Append" value="true"/&gt;
     &lt;param name="Threshold" value="DEBUG"/&gt;
     &lt;layout class="org.apache.log4j.PatternLayout"&gt;
       &lt;param name="ConversionPattern" value="%d %-5p [%c] %m%n"/&gt;
     &lt;/layout&gt;	    
  &lt;/appender&gt;
  
  &lt;appender name="otherFile" class="org.apache.log4j.FileAppender"&gt;
     &lt;param name="File" value="C:/Program Files/Apache Software Foundation/Tomcat 6.0/webapps/dwr/log/other.log"/&gt;
     &lt;param name="Append" value="true"/&gt;
     &lt;param name="Threshold" value="DEBUG"/&gt;
     &lt;layout class="org.apache.log4j.PatternLayout"&gt;
       &lt;param name="ConversionPattern" value="%d %-5p [%c] %m%n"/&gt;
     &lt;/layout&gt;	    
  &lt;/appender&gt;
  
  &lt;!-- All application exceptions/errors will be written here --&gt;  
  &lt;category name="org.directwebremoting.log.accessLog"&gt;
     &lt;priority value="INFO"/&gt;
     &lt;appender-ref ref="dwrLogFile" /&gt;
  &lt;/category&gt;
  
  &lt;!-- All DWR startup information will be written here --&gt; 
  &lt;category name="org.directwebremoting.log.startup"&gt;
     &lt;priority value="DEBUG"/&gt;
     &lt;appender-ref ref="dwrLogFile" /&gt;
  &lt;/category&gt;
  
  &lt;!-- All DWR script information will be written here --&gt; 
  &lt;category name="org.directwebremoting.log.scripts"&gt;
     &lt;priority value="DEBUG"/&gt;
     &lt;appender-ref ref="dwrLogFile" /&gt;
  &lt;/category&gt;
  
  &lt;!-- All DWR session information will be written here --&gt; 
  &lt;category name="org.directwebremoting.log.session"&gt;
     &lt;priority value="DEBUG"/&gt;
     &lt;appender-ref ref="dwrLogFile" /&gt;
  &lt;/category&gt;
  
  &lt;!-- All other messages will be written here, including exceptions internal to DWR --&gt;
  &lt;root&gt;
    &lt;priority value="DEBUG" /&gt; 
    &lt;appender-ref ref="otherFile" /&gt;
  &lt;/root&gt;

&lt;/log4j:configuration&gt;
</pre>

<p>See the <a href="http://logging.apache.org/log4j/docs/documentation.html" target="new">log4j documentation</a> for more details.</p>

<h3>Configuring java.util.logging for DWR</h3>

<p>See the <a href="http://java.sun.com/j2se/1.4.2/docs/guide/util/logging/overview.html" target="new">java.util.logging documentation</a> for more details.</p>

</div>
<div class='menu'>
<ul id='nav'>
<li class='noChildren'><a href='../../index.html'>Home</a></li>
<li class='hasChildren'><a href='../../introduction/index.html'>Overview&nbsp;...</a><ul>
<li class='noChildren'><a href='../../introduction/index.html'>Index</a></li>
<li class='noChildren'><a href='../../introduction/getting-started.html'>Quick Start</a></li>
<li class='noChildren'><a href='../../introduction/remoting_options.html'>Remoting Options</a></li>
<li class='noChildren'><a href='../../introduction/scripting-dwr.html'>Scripting DWR</a></li>
<li class='noChildren'><a href='../../introduction/tutorials.html'>Official Examples</a></li>
<li class='noChildren'><a href='../../introduction/elsewhere.html'>Other Examples</a></li>
</ul>
</li>
<li class='hasChildren'><a href='../../downloads/index.html'>Download&nbsp;...</a><ul>
<li class='noChildren'><a href='../../downloads/index.html'>Index</a></li>
<li class='noChildren'><a href='../../downloads/ciBuilds.html'>CI Builds</a></li>
<li class='hasChildren'><a href='../../downloads/changelog/index.html'>Change Log&nbsp;...</a><ul>
<li class='noChildren'><a href='../../downloads/changelog/index.html'>Index</a></li>
<li class='noChildren'><a href='../../downloads/changelog/dwr30.html'>New in v3.0</a></li>
<li class='noChildren'><a href='../../downloads/changelog/dwr20.html'>New in v2.0</a></li>
</ul>
</li>
<li class='hasChildren'><a href='../../downloads/upgrading/index.html'>Upgrading DWR&nbsp;...</a><ul>
<li class='noChildren'><a href='../../downloads/upgrading/index.html'>Index</a></li>
<li class='noChildren'><a href='../../downloads/upgrading/dwr30.html'>Upgrading to Version 3.0</a></li>
<li class='noChildren'><a href='../../downloads/upgrading/dwr20.html'>Upgrading to Version 2.0</a></li>
</ul>
</li>
</ul>
</li>
<li class='hasChildren'><a href='../../documentation/index.html'>Documentation&nbsp;...</a><ul>
<li class='noChildren'><a href='../../documentation/index.html'>Index</a></li>
<li class='hasChildren'><a href='../../documentation/browser/index.html'>Client Side&nbsp;...</a><ul>
<li class='noChildren'><a href='../../documentation/browser/index.html'>Index</a></li>
<li class='hasChildren'><a href='../../documentation/browser/engine/index.html'>engine.js&nbsp;...</a><ul>
<li class='noChildren'><a href='../../documentation/browser/engine/index.html'>Index</a></li>
<li class='noChildren'><a href='../../documentation/browser/engine/batch.html'>Call Batching</a></li>
<li class='noChildren'><a href='../../documentation/browser/engine/ordering.html'>Call Ordering</a></li>
<li class='noChildren'><a href='../../documentation/browser/engine/hooks.html'>Remoting Hooks</a></li>
<li class='noChildren'><a href='../../documentation/browser/engine/options.html'>Remoting Options</a></li>
<li class='noChildren'><a href='../../documentation/browser/engine/errors.html'>Timeouts</a></li>
</ul>
</li>
<li class='hasChildren'><a href='../../documentation/browser/util/index.html'>util.js&nbsp;...</a><ul>
<li class='noChildren'><a href='../../documentation/browser/util/index.html'>Index</a></li>
<li class='noChildren'><a href='../../documentation/browser/util/lists.html'>List Manipulation</a></li>
<li class='noChildren'><a href='../../documentation/browser/util/$.html'>$()</a></li>
<li class='noChildren'><a href='../../documentation/browser/util/tables.html'>Table Manipulation</a></li>
<li class='noChildren'><a href='../../documentation/browser/util/addOptions.html'>addOptions</a></li>
<li class='noChildren'><a href='../../documentation/browser/util/addRows.html'>addRows</a></li>
<li class='noChildren'><a href='../../documentation/browser/util/byId.html'>byId()</a></li>
<li class='noChildren'><a href='../../documentation/browser/util/escapeHtml.html'>escapeHtml</a></li>
<li class='noChildren'><a href='../../documentation/browser/util/getText.html'>getText</a></li>
<li class='noChildren'><a href='../../documentation/browser/util/getValue.html'>getValue</a></li>
<li class='noChildren'><a href='../../documentation/browser/util/getValues.html'>getValues</a></li>
<li class='noChildren'><a href='../../documentation/browser/util/onReturn.html'>onReturn</a></li>
<li class='noChildren'><a href='../../documentation/browser/util/removeAllOptions.html'>removeAllOptions</a></li>
<li class='noChildren'><a href='../../documentation/browser/util/removeAllRows.html'>removeAllRows</a></li>
<li class='noChildren'><a href='../../documentation/browser/util/selectRange.html'>selectRange</a></li>
<li class='noChildren'><a href='../../documentation/browser/util/setValue.html'>setValue</a></li>
<li class='noChildren'><a href='../../documentation/browser/util/setValues.html'>setValues</a></li>
<li class='noChildren'><a href='../../documentation/browser/util/toDescriptiveString.html'>toDescriptiveString</a></li>
<li class='noChildren'><a href='../../documentation/browser/util/useLoadingMessage.html'>useLoadingMessage</a></li>
</ul>
</li>
<li class='noChildren'><a href='../../documentation/browser/xdomain.html'>Cross-domain Support</a></li>
<li class='noChildren'><a href='../../documentation/browser/errors.html'>Error Handling</a></li>
<li class='noChildren'><a href='../../documentation/browser/extra-data.html'>Callbacks and Scoping</a></li>
<li class='noChildren'><a href='../../documentation/browser/support.html'>Browser Support</a></li>
</ul>
</li>
<li class='hasChildren'><a href='../../documentation/server/index.html'>Server Side&nbsp;...</a><ul>
<li class='noChildren'><a href='../../documentation/server/index.html'>Index</a></li>
<li class='hasChildren'><a href='../../documentation/server/configuration/index.html'>Configuration&nbsp;...</a><ul>
<li class='noChildren'><a href='../../documentation/server/configuration/index.html'>Index</a></li>
<li class='hasChildren'><a href='../../documentation/server/configuration/servlet/index.html'>WEB-INF Reference&nbsp;...</a><ul>
<li class='noChildren'><a href='../../documentation/server/configuration/servlet/index.html'>Index</a></li>
<li class='noChildren'><a href='../../documentation/server/configuration/servlet/multiconfig.html'>Multiple dwr.xml files</a></li>
<li class='noChildren'><a href='../../documentation/server/configuration/servlet/plugin.html'>Plug-ins</a></li>
<li class='noChildren'><a href='../../documentation/server/configuration/servlet/test.html'>Test Mode</a></li>
</ul>
</li>
<li class='hasChildren'><a href='../../documentation/server/configuration/dwrxml/index.html'>dwr.xml&nbsp;...</a><ul>
<li class='noChildren'><a href='../../documentation/server/configuration/dwrxml/index.html'>Index</a></li>
<li class='hasChildren'><a href='../../documentation/server/configuration/dwrxml/converters/index.html'>Converters&nbsp;...</a><ul>
<li class='noChildren'><a href='../../documentation/server/configuration/dwrxml/converters/index.html'>Index</a></li>
<li class='noChildren'><a href='../../documentation/server/configuration/dwrxml/converters/array.html'>Arrays</a></li>
<li class='noChildren'><a href='../../documentation/server/configuration/dwrxml/converters/bean.html'>Beans / Objects</a></li>
<li class='noChildren'><a href='../../documentation/server/configuration/dwrxml/converters/collection.html'>Collections</a></li>
<li class='noChildren'><a href='../../documentation/server/configuration/dwrxml/converters/dom.html'>DOM Objects</a></li>
<li class='noChildren'><a href='../../documentation/server/configuration/dwrxml/converters/enum.html'>Enum</a></li>
<li class='noChildren'><a href='../../documentation/server/configuration/dwrxml/converters/file.html'>Images and Binary Files</a></li>
</ul>
</li>
<li class='hasChildren'><a href='../../documentation/server/configuration/dwrxml/creators/index.html'>Creators&nbsp;...</a><ul>
<li class='noChildren'><a href='../../documentation/server/configuration/dwrxml/creators/index.html'>Index</a></li>
<li class='noChildren'><a href='../../documentation/server/configuration/dwrxml/creators/new.html'>'New' Creator</a></li>
<li class='noChildren'><a href='../../documentation/server/configuration/dwrxml/creators/scripted.html'>'Scripted' Creator</a></li>
<li class='noChildren'><a href='../../documentation/server/configuration/dwrxml/creators/static.html'>'Static' Creator</a></li>
</ul>
</li>
<li class='noChildren'><a href='../../documentation/server/configuration/dwrxml/filters.html'>Filters</a></li>
<li class='noChildren'><a href='../../documentation/server/configuration/dwrxml/signatures.html'>Signatures</a></li>
</ul>
</li>
<li class='noChildren'><a href='../../documentation/server/configuration/annotations.html'>Annotations</a></li>
<li class='noChildren'><a href='../../documentation/server/configuration/fluent.html'>Fluent Configuration</a></li>
</ul>
</li>
<li class='hasChildren'><a href='../../documentation/server/integration/index.html'>Integrating with&nbsp;...</a><ul>
<li class='noChildren'><a href='../../documentation/server/integration/index.html'>Index</a></li>
<li class='noChildren'><a href='../../documentation/server/integration/spring.html'>Spring</a></li>
<li class='noChildren'><a href='../../documentation/server/integration/hibernate.html'>Hibernate</a></li>
<li class='noChildren'><a href='../../documentation/server/integration/jsf.html'>JSF</a></li>
<li class='noChildren'><a href='../../documentation/server/integration/guice.html'>Guice</a></li>
<li class='noChildren'><a href='../../documentation/server/integration/struts.html'>Struts</a></li>
<li class='noChildren'><a href='../../documentation/server/integration/jaxer.html'>Aptana Jaxer</a></li>
<li class='noChildren'><a href='../../documentation/server/integration/pageflow.html'>Pageflow / Beehive</a></li>
</ul>
</li>
<li class='noChildren'><a href='../../documentation/server/environment.html'>Supported Environments</a></li>
<li class='noChildren'><a href='logging.html' class='currentLink'>Logging</a></li>
<li class='noChildren'><a href='../../documentation/server/javaapi.html'>Accessing Servlet Objects</a></li>
<li class='noChildren'><a href='../../documentation/server/generic.html'>Reading from other URLs</a></li>
<li class='noChildren'><a href='../../documentation/server/script_compression.html'>Script Compression</a></li>
</ul>
</li>
<li class='hasChildren'><a href='../../documentation/reverse-ajax/index.html'>Reverse Ajax&nbsp;...</a><ul>
<li class='noChildren'><a href='../../documentation/reverse-ajax/index.html'>Index</a></li>
<li class='noChildren'><a href='../../documentation/reverse-ajax/getting-started.html'>Getting Started</a></li>
<li class='noChildren'><a href='../../documentation/reverse-ajax/configuration.html'>Configuring</a></li>
<li class='noChildren'><a href='../../documentation/reverse-ajax/retry.html'>Error/Retry Logic</a></li>
<li class='noChildren'><a href='../../documentation/reverse-ajax/hints-and-tips.html'>Hints and Tips</a></li>
<li class='noChildren'><a href='../../documentation/reverse-ajax/load-monitors.html'>Load Monitors</a></li>
<li class='noChildren'><a href='../../documentation/reverse-ajax/threads.html'>Non-Web Threads</a></li>
</ul>
</li>
</ul>
</li>
<li class='hasChildren'><a href='../../security/index.html'>Security&nbsp;...</a><ul>
<li class='noChildren'><a href='../../security/index.html'>Index</a></li>
<li class='noChildren'><a href='../../security/script-tag-protection.html'>JavaScript Security</a></li>
<li class='noChildren'><a href='../../security/allowGetForSafariButMakeForgeryEasier.html'>Safari, GET and CSRF</a></li>
</ul>
</li>
<li class='hasChildren'><a href='../../support/index.html'>Support&nbsp;...</a><ul>
<li class='noChildren'><a href='../../support/index.html'>Index</a></li>
<li class='noChildren'><a href='../../support/common_problems.html'>Common Problems</a></li>
<li class='noChildren'><a href='../../support/faqs.html'>Common Questions</a></li>
</ul>
</li>
<li class='hasChildren'><a href='../../development/index.html'>Development&nbsp;...</a><ul>
<li class='noChildren'><a href='../../development/index.html'>Index</a></li>
<li class='hasChildren'><a href='../../development/contributor/index.html'>Contributors&nbsp;...</a><ul>
<li class='noChildren'><a href='../../development/contributor/index.html'>Index</a></li>
<li class='noChildren'><a href='../../development/contributor/contract.html'>The Maintainer Contract</a></li>
</ul>
</li>
<li class='noChildren'><a href='../../development/ccla.html'>CLA for Corporations</a></li>
<li class='noChildren'><a href='../../development/icla.html'>CLA for Individuals</a></li>
</ul>
</li>
</ul></div>
</body>
</html>
